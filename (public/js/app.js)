const socket = io();

// 1. Canlı İstifadəçi Sayını Yenilə
socket.on('userCountUpdate', (count) => {
    document.getElementById('user-count').innerText = count;
});

// 2. Giriş Edib-Etmədiyini Yoxla
function checkAuth() {
    const token = localStorage.getItem('token');
    const role = localStorage.getItem('role');
    const authSection = document.getElementById('auth-section');
    const adminLink = document.getElementById('admin-link');

    if (token) {
        const username = localStorage.getItem('username');
        authSection.innerHTML = `
            <span class="user-name">Xoş gəldin, ${username}</span>
            <button onclick="logout()" class="btn-logout">Çıxış</button>
        `;
        
        if (role === 'admin') {
            adminLink.style.display = 'block';
        }
    }
}

window.logout = () => {
    localStorage.clear();
    location.reload();
};

window.onload = () => {
    checkAuth();
    // YouTube API funksiyasını bura çağıra bilərsiniz
};

