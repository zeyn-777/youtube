<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AZE-YOUTUBE | Global Video Platforma</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --red: #ff0000; --dark-bg: #0f0f0f; --card-bg: #1e1e1e; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark-bg); color: white; }

        /* Navigation */
        header { background: #202020; padding: 10px 20px; position: sticky; top: 0; z-index: 1000; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; }
        .logo h1 { color: var(--red); font-size: 22px; cursor: pointer; }
        
        .search-bar { flex: 0 1 600px; display: flex; background: #121212; border-radius: 20px; padding: 5px 15px; border: 1px solid #333; }
        .search-bar input { background: transparent; border: none; color: white; width: 100%; outline: none; padding: 5px; font-size: 16px; }
        .search-bar button { background: none; border: none; color: #888; cursor: pointer; padding: 0 10px; }

        /* Layout */
        .main-container { display: flex; max-width: 1600px; margin: 0 auto; }
        .sidebar { width: 240px; padding: 20px; height: 90vh; position: sticky; top: 60px; }
        .sidebar a { display: block; padding: 12px; color: white; text-decoration: none; border-radius: 10px; margin-bottom: 5px; transition: 0.2s; }
        .sidebar a:hover, .sidebar a.active { background: #272727; }
        .sidebar i { margin-right: 15px; width: 20px; }

        /* Content */
        .content { flex: 1; padding: 20px; }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .video-card { cursor: pointer; transition: 0.3s; }
        .video-card:hover { transform: translateY(-5px); }
        .video-card img { width: 100%; aspect-ratio: 16/9; object-fit: cover; border-radius: 12px; background: #222; }
        .video-info h3 { font-size: 14px; margin: 10px 0 5px 0; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; color: #fff; }
        .video-info p { color: #aaa; font-size: 12px; }

        /* Mobile */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .search-bar { flex: 1; margin: 0 10px; }
            .video-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo" onclick="location.reload()"><h1>AZE<span>-YOUTUBE</span></h1></div>
        <form class="search-bar" id="search-form">
            <input type="text" id="search-input" placeholder="YouTube-da axtarış edin...">
            <button type="submit"><i class="fas fa-search"></i></button>
        </form>
        <div class="user-menu" style="display: flex; gap: 15px;">
            <a href="admin/admin.html" style="color: #ffcc00; text-decoration: none; font-weight: bold;"><i class="fas fa-ad"></i></a>
            <a href="login.html" style="color: #3ea6ff; text-decoration: none;"><i class="fas fa-user-circle fa-lg"></i></a>
        </div>
    </header>

    <div class="main-container">
        <aside class="sidebar">
            <a href="javascript:void(0)" onclick="loadTrending()" class="active"><i class="fas fa-fire"></i> Trendlər</a>
            <a href="javascript:void(0)" onclick="searchVideos('musiqi')"><i class="fas fa-music"></i> Musiqi</a>
            <a href="javascript:void(0)" onclick="searchVideos('gaming')"><i class="fas fa-gamepad"></i> Oyun</a>
            <a href="javascript:void(0)" onclick="searchVideos('news')"><i class="fas fa-newspaper"></i> Xəbərlər</a>
            <hr style="border:0; border-top:1px solid #333; margin:15px 0;">
            <a href="https://t.me/aze_pro_official" target="_blank"><i class="fab fa-telegram"></i> Dəstək</a>
        </aside>

        <main class="content">
            <h2 id="section-title" style="margin-bottom: 20px; font-size: 20px;">Azərbaycanda Trendlər</h2>
            <div class="video-grid" id="video-display">
                </div>
        </main>
    </div>

    <script type="module">
        const API_KEY = "AIzaSyB7C2O7EAaR0O5g-s7CKY2xOHjE23WgEWI";
        const display = document.getElementById('video-display');
        const searchForm = document.getElementById('search-form');
        const searchInput = document.getElementById('search-input');
        const sectionTitle = document.getElementById('section-title');

        // 1. Trend Videoları Yüklə (Default olaraq AZ regionu)
        async function loadTrending() {
            sectionTitle.innerText = "Azərbaycanda Trendlər";
            display.innerHTML = "<p>Yüklənir...</p>";
            try {
                const res = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&chart=mostPopular&regionCode=AZ&maxResults=24&key=${API_KEY}`);
                const data = await res.json();
                render(data.items, true);
            } catch (err) { console.error(err); }
        }

        // 2. Global Axtarış Funksiyası
        async function searchVideos(query) {
            if(!query) return;
            sectionTitle.innerText = `"${query}" üçün nəticələr`;
            display.innerHTML = "<p>Axtarılır...</p>";
            try {
                const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${query}&type=video&maxResults=24&key=${API_KEY}`);
                const data = await res.json();
                render(data.items, false);
            } catch (err) { console.error(err); }
        }

        // 3. Videoları Ekrana Çıxar
        function render(videos, isTrending) {
            display.innerHTML = videos.map(v => {
                const videoId = isTrending ? v.id : v.id.videoId;
                return `
                <div class="video-card" onclick="location.href='watch.html?v=${videoId}'">
                    <img src="${v.snippet.thumbnails.high.url}">
                    <div class="video-info">
                        <h3>${v.snippet.title}</h3>
                        <p>${v.snippet.channelTitle}</p>
                        <p style="font-size:11px; opacity:0.6;">${new Date(v.snippet.publishedAt).toLocaleDateString('az-AZ')}</p>
                    </div>
                </div>`;
            }).join('');
        }

        // Axtarış hadisəsi
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            searchVideos(searchInput.value);
        });

        window.onload = loadTrending;
    </script>
</body>
</html>
